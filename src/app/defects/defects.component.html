<div style="float:left;width:35%;">
	
	<button (click)="goBack()">vorige pagina</button>
	<br/>

	<h2>Defecten voor: {{ place?.name }}</h2>
	<ul class="defects" *ngIf="defects; else showNoDefects">
		<li *ngFor="let defect of defects" [class.active]="defect == selectedDefect" (click)="onSelect(defect)">
			{{defect?.name}}
		</li>
	</ul>

</div>

<ng-template #showNoDefects>
	<p style="margin-left:2em;">er zijn geen defecten voor dit lokaal</p>
</ng-template>


<div style="float: right; width:60%;" *ngIf="selectedDefect">
	<h2 style="padding-left:0px;">Details:</h2>
	<div>
		
		<div style="margin-bottom: 8px;"><span>name: {{ selectedDefect.name }}</span></div>
		
		<div style="margin-bottom: 8px;"><span>laatst gewijzigd op: 
			{{ selectedDefect.last_edited | date : "dd-MM-yyyy, HH:mm:ss" }}			<!--.seconds * 1000 for timestamp -->
		</span>
		</div>
		
		<div style="margin-bottom: 8px;"><span>laatst gewijzigd door: 
			<span *ngIf="lastEditor; else showNoLastEditor">{{ lastEditor.display_name }}</span>
			<ng-template #showNoLastEditor>geen user gevonden</ng-template></span>
		</div>
		
		<div>
			<label>omschrijving:
				<input [(ngModel)]="selectedDefect.description" placeholder="omschrijving">
			</label>
		</div>
		
		<div>
			<label>status:
				<select [(ngModel)]="selectedDefect.status" placeholder="1">
					<option value=1>nog niet in behandeling</option>
					<option value=2>in behandeling</option>
					<option value=3>opgelost</option>
				</select>
			</label>
		</div>
		
		<div>
			<label>severity:
				<select [(ngModel)]="selectedDefect.severity" placeholder="1">
					<option value=1>1</option>
					<option value=2>2</option>
					<option value=3>3</option>
					<option value=4>4</option>
					<option value=5>5</option>
				</select>
			</label>
		</div>
		
		<div>
			<label>reparatie datum:
				<input type="date" [(ngModel)]="selectedDefect.repair_date" placeholder="dd/mm/jj">
			</label>
		</div>
		
		<div>
			<label>bevoegd persoon:
				<input [(ngModel)]="selectedDefect.responsible_person" placeholder="bevoegd persoon">
			</label>
		</div>
		
		<div>
			<label>bevoegde instelling:
				<select [(ngModel)]="selectedDefect.responsible_instance">
					<option value="AP">AP</option>
					<option value="Provincie">Provincie</option>
				</select>
			</label>
		</div>
		
		<div>
			<label>extra info:
				<input [(ngModel)]="selectedDefect.extra_note" placeholder="extra info">
			</label>
		</div>
	
		<button (click)="save()">save</button><br/>
		<ngx-gallery [options]="galleryOptions" [images]="galleryImages"></ngx-gallery>
	
	</div>
</div>